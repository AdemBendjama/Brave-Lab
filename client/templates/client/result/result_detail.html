{% extends 'client/client.html' %}
{% load static %}

{% block css_3 %}
<link rel="stylesheet" href="{% static 'css/pdf.css' %}">

{% endblock css_3 %}



{% block main %}

    {% if invoice.payment_status %}
        <div class="container">
            <h1>Test Results - Invoice #{{ invoice.id }}</h1>
            <p>Date: {{ invoice.creation_time }}</p>
            <p>Approved: {% if test_result.approved %}Yes{% else %}No{% endif %}</p>
            <p>Duration: {{ test_result.duration }}</p>
            <p>Total Price: {{ invoice.total_price }}</p>

            <h3>Tests:</h3>
            {% for test in test_request.tests.all %}
                <div class="test">
                    <h3>{{ test.test_offered.name }}</h3>
                    <p>Description: {{ test.description }}</p>
                    {% for component in test.components.all %}
                        <p>{{ component.info.name }}: {{ component.value }} {{ component.info.unit }}</p>
                    {% endfor %}
                </div>
            {% endfor %}

            <h3>Invoice:</h3>
            <div class="button-container">
                <a href="{% url 'pdf_client_invoice' invoice.id %}?download=true" class="download-button">Download PDF</a>
                <a href="{% url 'pdf_client_invoice' invoice.id %}" target="_blank" class="view-button">View PDF</a>
            </div>

            <h3>Test Results:</h3>
            <div class="button-container">
                <a href="{% url 'pdf_client_results' invoice.id %}?download=true" class="download-button">Download PDF</a>
                <a href="{% url 'pdf_client_results' invoice.id %}" target="_blank" class="view-button">View PDF</a>
            </div>
        </div>
    {% else %}
        <h1>404 Not Found</h1>
    {% endif %}
{% endblock main %}


