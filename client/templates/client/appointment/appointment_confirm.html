{% extends 'client/client.html' %}
{% load static %}

{% block main %}
<div class='Container'>
    <h1>Book Appointment</h1>

        <h3>Client</h3>
        <p>{{user.first_name}}  {{user.last_name}}</p>
        <h3>Date</h3>
        <p>{{data.date}}</p>
        <h3>description</h3>
        <p>{{data.description}}</p>
        {% for test in data.tests_requested %}
            <h3>Test {{ forloop.counter }}</h3>
            <p>{{test.name}}</p>
        {% endfor %}
        <h3>Total Price</h3>
        <p>{{data.total_price}}</p>
        <small style="font-size:12px;">note: Excluding the Appointment Visit Fees</small>
        <h3>Document</h3>
        {% if data.document is not None %}
            <img src="/media/{{data.document}}" width='200' height="200">
        {% else %}
            <p>No Document provided.</p>
        {% endif %}
        

        <form method="POST">
            {% csrf_token %}

            <h2>Choose your Payment Method</h2>
            <select name="payment_option">
                <option value="PP">Pre-pay</option>
                <option value="OR" selected>On-Receive</option>
            </select>


            <input type="hidden" name="data.client" value="{{ data.client.id }}">
            <input type="hidden" name="data.date" value="{{ data.date }}">
            <input type="hidden" name="data.description" value="{{ data.description }}">
            {% if data.document is not None %}
                <input type="hidden" name="data.document" value="{{ data.document }}">
            {% endif %}
            <input type="hidden" name="data.test_count" value="{{ data.tests_requested.count }}">
            {% for test in data.tests_requested %}
                <input type="hidden" name="data.tests_requested{{forloop.counter}}" value="{{ test.id }}">
            {% endfor %}
            <input type="hidden" name="data.total_price" value="{{ data.total_price }}">


            <button type="submit">Confirm</button>
        </form>

</div>
{% endblock main %}