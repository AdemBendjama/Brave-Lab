{% extends 'client/client.html' %}
{% load static %}

{% block main %}
<div class="Container">
    <h1>Appointment Details</h1>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
            {% endfor %}
        </ul>
    {% endif %}


    <h3>Client: {{ appointment.client.user.first_name }} {{ appointment.client.user.last_name }}</h3>
    <p>Date: {{ appointment.date }}</p>
    <p>Description: {{ appointment.description }}</p>
    <p>Total Tests Price: {{ appointment.total_price }}</p>
    <p>Appointment Fee: {%if appointment.payment.payed_appointment_fee %}Payed{%else%}Unpayed{%endif%}</p>

    <h3>Tests Requested:</h3>
    <ul>
        {% for test in appointment.tests_requested.all %}
            <li>{{ test.name }}</li>
        {% empty %}
            <li>No tests requested.</li>
        {% endfor %}
    </ul>

    {% if appointment.document %}
        <p>Document: 
        </p>    
        <a href="{{ appointment.document.url }}" target="_blank">
            <img src="{{ appointment.document.url }}" width="200" >
        </a>
    {% else %}
        <p>No document provided.</p>
    {% endif %}

    <p>Payment Status: {{ appointment.payment_status }}</p>

    <h3>Status</h3>
    {% if appointment.cancelled %}
        <p>Appointment Has Been Cancelled</p>
    {% elif appointment.status == appointment.OVERDUE %}
        <p>Appointment Is Overdue</p>
    {% else%}
        <p>Appointment Is Pending</p>
    {% endif %}

</div>

{% endblock main %}

