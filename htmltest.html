{% extends 'client/client.html' %}
{% load static %}

{% block main %}
{% if invoice.payment_status %}
<div class="Container">
    <h1>Test Results - Invoice #{{ invoice.id }}</h1>
    <p>Date: {{invoice.creation_time}}</p>
    <p>Approved: {% if test_result.approved %}Yes{% else %}No{% endif %}</p>
    <p>Duration: {{ test_result.duration }}</p>
    <p>Total Price: {{ invoice.total_price }}</p>

    <h3>Tests:</h3>
    {% for test in test_request.tests.all %}
    <h3>{{ test.test_offered.name }}</h3>
    <p>Description :{{ test.description }}</p>
    {% for component in test.components.all %}
    <p>{{ component.info.name }} : {{ component.value }} {{ component.info.unit }}
        {% endfor %}
        {% endfor %}


    <h3>Invoice:</h3>
    <a href="{% url 'pdf_client_invoice' invoice.id%}?download=true"><button>Download PDF</button></a>
    <a href="{% url 'pdf_client_invoice' invoice.id%}" target="_blank"><button>View PDF</button></a>
    <h3>Test Results:</h3>
    <a href="{% url 'pdf_client_results' invoice.id%}?download=true"><button>Download PDF</button></a>
    <a href="{% url 'pdf_client_results' invoice.id %}" target="_blank"><button>View PDF</button></a>



</div>
{% else %}
<h1>404 Not Found</h1>
{% endif %}
{% endblock main %}